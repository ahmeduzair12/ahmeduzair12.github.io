
<!---    AIzaSyDbRKGXldv7wA8J_4KzGSJi4v5_Pz6Xgrw -->

<!DOCTYPE html>
<html>
<body>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<div id="googleMap" style="width:100%;height:400px;"></div>

<script>
function myMap() {
var mapProp= {
    center:new google.maps.LatLng(51.508742,-0.120850),
    zoom:5,
};
var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
var coordInfoWindow = new google.maps.InfoWindow();

google.maps.event.addListener(map, 'click', function(event) {
    var lat = event.latLng.lat();
    var lon = event.latLng.lng();
    var url = 'https://api.openweathermap.org/data/2.5/weather?APPID=fcf0a3470d059666988540d3948ccf55&lat=' + lat + '&lon=' + lon+'&units=metric';
    var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
       // Typical action to be performed when the document is ready:
     //document.getElementById("demo").innerHTML = xhttp.responseText;
     // console.log(xhttp.responseText);
     var place = new google.maps.LatLng(lat,lon);
    //  var cityelement = document.getElementById('cityname');
    //  var tem = document.getElementById('temp');
    //  var wea = document.getElementById('description');
     var data = JSON.parse(xhttp.responseText);
     var cityname = data.name;
     var temp = data.main.temp;
     var weather = data.weather[0].description;
     var img = data.weather[0].icon;
     var img_urlm = "http://openweathermap.org/img/w/";
     var main_img = img_urlm+img+'.png';
     // var image_element = document.getElementById("img1");



        coordInfoWindow.setContent(`
         <img src = "` + main_img + `">  <br/>
            City: ` + cityname + `<br/>
            Temperature: ` + temp + `<br/>
            Description:` + weather +`<br/>
          `);
        coordInfoWindow.setPosition(place);
        coordInfoWindow.open(map);

     // image_element.setAttribute('src', main_img);


    
     
    }
};
xhttp.open("GET", url, true);
xhttp.send();

});

}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDbRKGXldv7wA8J_4KzGSJi4v5_Pz6Xgrw&callback=myMap"></script>
</body>
</html>